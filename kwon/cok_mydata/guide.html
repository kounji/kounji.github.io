<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="format-detection" content="telephone=no">
	<link rel="shortcut icon" href="guide/image/favicon_cok.png">
	<title>2024 콕 마이데이터</title>

    <!-- 퍼블현황판 css -->
    <link rel="stylesheet" href="guide/css/swiper-4.5.1.min.css">
    <link rel="stylesheet" href="guide/css/cok_mydata_guide.css">

    <!-- 공통 library -->
    <script type="text/javascript" src="guide/js/jquery-3.7.1.min.js"></script>
    <script type="text/javascript" src="guide/js/jquery-ui-1.14.1.min.js"></script>
    <script type="text/javascript" src="guide/js/swiper-4.5.1.min.js"></script>
    <script type="text/javascript" src="guide/js/ui_common.js"></script>
</head>

<body>
<div clkass="wrap">
    <h1 class="h1">2024 CoK mydata</h1>
    <div class="content">
        <h2 class="h2">sticky nav</h2>
        <ul class="prod_nav_list">
            <li class="prod_nav_item"><a href="#product_01" class="prod_nav_link">1 메뉴</a></li>
            <li class="prod_nav_item"><a href="#product_02" class="prod_nav_link">2 메뉴</a></li>
            <li class="prod_nav_item"><a href="#product_03" class="prod_nav_link">3 메뉴</a></li>
            <li class="prod_nav_item"><a href="#product_04" class="prod_nav_link">4 메뉴</a></li>
            <li class="prod_nav_item"><a href="#product_05" class="prod_nav_link">5 메뉴</a></li>
        </ul>
        <div class="main_part products_area">
            <div id="product_01" class="products_unit">1 내용</div>
            <div id="product_02" class="products_unit">2 내용</div>
            <div id="product_03" class="products_unit">3 내용</div>
            <div id="product_04" class="products_unit">4 내용</div>
            <div id="product_05" class="products_unit">5 내용</div>
        </div>

        <hr class="devide">

        <h2 class="h2">table</h2>
        <div class="ui_table">
            <table>
                <caption>테이블 캡션입니다</caption>
                <colgroup>
                    <col style="width:30%">
                    <col>
                </colgroup>
                <thead>
                    <tr>
                        <th>구분1</th>
                        <th>구분2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">구분3</th>
                        <td>내용</td>
                    </tr>
                    <tr>
                        <th scope="row">구분4</th>
                        <td>내용</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th scope="row">total</th>
                        <td>내용</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <hr class="line">

        <div class="ui_table">
            <div class="scroll_x">
                <table>
                    <caption>테이블 캡션입니다</caption>
                    <colgroup>
                        <col style="width:110px">
                        <col>
                    </colgroup>
                    <thead>
                        <tr>
                            <th>구분1</th>
                            <th>구분2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">구분3</th>
                            <td>내용</td>
                        </tr>
                        <tr>
                            <th scope="row">구분4</th>
                            <td>내용</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th scope="row">total</th>
                            <td>내용</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        
        <hr class="devide">

        <h2 class="h2">swiper</h2>

        <!-- Slider main container -->
        <div class="test_swiper swiper-container">
            <!-- Additional required wrapper -->
            <div class="swiper-wrapper">
                <!-- Slides -->
                <div class="swiper-slide" style="height:200px; background:lemonchiffon">Slide 1</div>
                <div class="swiper-slide" style="height:200px; background:aquamarine">Slide 2</div>
                <div class="swiper-slide" style="height:200px; background:burlywood">Slide 3</div>

            </div>
            <!-- If we need pagination -->
            <div class="swiper-pagination"></div>
        
            <!-- If we need navigation buttons -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        
            <!-- If we need scrollbar 
            <div class="swiper-scrollbar"></div>-->

            <button type="button" class="swiper-toggle-button" aria-label="정지"></button>
        </div>
    </div>
</div>
<script>
$(window).on('load',function(){
	testSwiper();
    stickyNav();
});
function testSwiper(){
    var testSwiper = new Swiper('.test_swiper.swiper-container', {
        speed: 400,
        slidesPerView: 1,
        spaceBetween: 0,
        loop: true,
        pagination: {
            clickable: true,
            el:".swiper-pagination",
            renderBullet: function (index, className) {
                return '<button type="button" class="' + className + '">' + (index + 1) + "</button>";
            },
            //type: 'fraction', ex)1/10
        },
        //scrollbar: {
        //    el: '.swiper-scrollbar',
        //    hide: true,
        //},
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        a11y: {
            prevSlideMessage: '이전 슬라이드',
            nextSlideMessage: '다음 슬라이드',
        },
        autoplay: {
            delay: 3000,
            disableOnInteraction: false,// 수동으로 스와이프 후 자동 재생
        },
    });
    $('.test_swiper .swiper-toggle-button').on('click', function(){
        $(this).toggleClass('on');
        if($(this).hasClass('on')){
            testSwiper.autoplay.stop();
            $(this).attr('aria-label', '재생');
        }else{
            testSwiper.autoplay.start();
            $(this).attr('aria-label', '정지');
        }
    });
}


function stickyNav(){
    $(document).on('click', '.prod_nav_link', function(e){
        var $target = $($(this).attr('href'));

        $('html').animate({
            //scrollTop: $target.offset().top - ($('#headerLay').height() + $('.prod_nav_list').height() + 20)
            scrollTop: $target.offset().top - ($('.prod_nav_list').height() + 20)
        },600);
        e.preventDefault();        
    });

    // var lastScroll = 0;
    $(document).on('scroll', function(){
        var nowScroll = $(window).scrollTop();

        $('.products_unit').each(function(){
            var targetTop = $(this).offset().top;

            if((targetTop - nowScroll) < 100){
                $('.prod_nav_list').find('.prod_nav_link').removeClass('active');
                $('.prod_nav_list').find('[href="#' + $(this).attr('id') + '"').addClass('active');
            }
        });

        // if((nowScroll > lastScroll)){
        //     console.log('아래로')
        //     $('.prod_nav_list').css('display', 'flex');
        // }else{
        //     console.log('위로')
        //     $('.prod_nav_list').css('display', 'none');
        // }
        
        scrollTopCheck();

        // lastScroll = nowScroll;
    });

    // nav 고정
    function scrollTopCheck(){
        var $nav = $('.prod_nav_list');// .prod_nav_list가 존재하는 곳에서만 실행
        if($nav.length > 0){            
            var navTop = $nav.offset().top;
            var scrollTop = $(window).scrollTop();

            if(navTop - scrollTop < 46){
                $nav.addClass('active');            
            }else if(scrollTop < 40){
                $nav.removeClass('active');
            }
        }        
    }
    scrollTopCheck();//init

}
</script>
</body>
</html>