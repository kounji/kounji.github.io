!function(d){"use strict";var e={},t=d.crypto||d.msCrypto,a=t?t.subtle||t.webkitSubtle:void 0,c=!1;function s(e,t,n,i,r,o){if(e===t){var d=document.createElement("script");d.innerHTML=n,o&&(d.onload=o),r.getElementsByTagName("head")[0].appendChild(d)}else console.log("'"+i+"' 파일의 해시값 오류로 결제원 WEB서버에서 다운로드 합니다."),l(i,r,o)}function l(e,t,n){var i=document.createElement("script");i.src=c?"https://4user.yeskey.or.kr/v1/"+e+"?time="+u():"https://4user.yeskey.or.kr/v1/"+e+"?2021-06-15T01_39_56.882Z",i.charset="utf-8",i.type="text/javascript",n&&(i.onload=n),t&&t.body&&t.body.appendChild(i)}function f(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(null,t))}function u(){var e=new Date,t=e.getFullYear(),n=new String(e.getMonth()+1),i=new String(e.getDate()),r=new String(e.getHours());return 1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),t+n+i+r}e.getValidJSForWebStandardComplianceBroswer=function(e,t,n,i,r){var o=document.createElement("script");o.id=e,o.type="text/javascript",o.src=c?"https://sdk.yeskey.or.kr/v1/"+n+"?time="+u():"https://sdk.yeskey.or.kr/v1/"+n+"?2021-06-15T01_39_56.882Z",o.charset="utf-8",o.integrity="sha256-"+t,o.crossOrigin="anonymous",r&&(o.onload=r),o.onerror=function(){console.log("'"+n+"' 파일의 해시값 오류로 결제원 WEB서버에서 다운로드 합니다."),l(n,i,r)},i&&i.body&&i.body.appendChild(o)},e.getValidJSForNonWebStandardComplianceBroswer=function(t,n,i,r){var e,o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===o.DONE){if(""==o.responseText)return console.log("다운로드 실패"),void l(n,i,r);var e=new Uint8Array(function(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],d=0;d<i;d++){if(55295<(n=e.charCodeAt(d))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(d+1===i){-1<(t-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(-1<(t-=3)&&o.push(239,191,189),r=null);if(n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}(o.responseText));if(d.crypto)try{a.digest("SHA-256",e).then(function(e){s(f(e),t,o.responseText,n,i,r)})}catch(e){console.log("WebCrypto 객체에 subtle 또는 webkitSubtle 객체에 digest 함수 없음!!"),l(n,i,r)}else try{a.digest("SHA-256",e).oncomplete=function(e){s(f(e.target.result),t,o.responseText,n,i,r)}}catch(e){console.log("WebCrypto 객체에 subtle 또는 webkitSubtle 객체에 digest 함수 없음!!"),l(n,i,r)}}},e=c?"https://sdk.yeskey.or.kr/v1/"+n+"?time="+u():"https://sdk.yeskey.or.kr/v1/"+n+"?2021-06-15T01_39_56.882Z",o.open("GET",e),o.send()},d.FinCert||(d.FinCert={}),d.FinCert.loadUtil=e}(window),"undefined"==typeof FinCert&&(FinCert={}),function(n,e){var i=e.Sdk=e.Sdk||{},o=e.loadUtil=e.loadUtil||{},d="S3MW2vtmkIR4axP3ZzQNyrbErriQbuEs31TaV2V6cS0=",a="eyV+rbQICmrd8gDp5geha6GsO4TMySNYFKMAR2/yW1w=",r=!1,c=!1,s=!1,l=n.crypto||n.msCrypto;i.init||(i.waitUntilLoadingCompleted=function(e){var t=document.getElementById("finCertSdkIframe");if(!(t&&t.contentWindow&&t.contentWindow.FinCert))return console.log("wait until loading fincert sdk finished."),void(initLoadingTimerId=setTimeout(i.waitUntilLoadingCompleted,100,e));console.log("loading fincert sdk is finished."),c=!0,i.init(e)},i.init=function(e){if(l)if(c)s&&document.getElementById("finCertSdkIframe").contentWindow.FinCert.Interface.setClientFrameJsLoadingFinished(),document.getElementById("finCertSdkIframe").contentWindow.FinCert.Sdk.init(e);else{if(r){if(t={message:"이미 다른 금융인증SDK의 함수를 호출 중입니다. (init)",cause:null,code:100008},!e||!e.fail)throw t;return void e.fail(t)}r=!0,i.waitUntilLoadingCompleted(e)}else{var t={message:"미지원 브라우저 입니다. 다른 브라우저를 사용하시기 바랍니다.",cause:null,code:900001};if(!e||!e.fail)throw t;e.fail(t)}},i.issue=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.issue(e)},i.regSimpleKeyToken=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.regSimpleKeyToken(e)},i.sign=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.sign(e)},i.signWithoutUI=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.signWithoutUI(e)},i.myDataSign=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.myDataSign(e)},i.manage=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.manage(e)},i.checkCloudConn=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.checkCloudConn(e)},i.setSubAuthData=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.setSubAuthData(e)},i.getCertInfoList=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getCertInfoList(e)},i.setAuthData=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.setAuthData(e)},i.getCertInfo=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getCertInfo(e)},i.getSignerCertFromSignedVal=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getSignerCertFromSignedVal(e)},i.isOverseasIp=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.isOverseasIp(e)},i.registerDevice=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.registerDevice(e)},i.cancelDeviceRegister=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.cancelDeviceRegister(e)},i.getRegisterDeviceStatus=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.getRegisterDeviceStatus(e)},i.disconnectCloudConn=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.disconnectCloudConn(e)},i.convertBase64UrlToBase64=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.convertBase64UrlToBase64(e)},i.convertBase64ToBase64Url=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.convertBase64ToBase64Url(e)},i.signEnvelop=function(e){var t=document.getElementById("finCertSdkIframe");t&&t.contentWindow.FinCert.Sdk.signEnvelop(e)},i.abort=function(e){var t=document.getElementById("finCertSdkIframe");if(t)t.contentWindow.FinCert.Sdk.abort(e);else if(e&&e.callback)try{e.callback()}catch(e){console.warn("callback 함수를 호출하는 동안 에러가 발생하였습니다. 확인하시기 바랍니다."),console.warn(e.message)}});var f=function(i){if(console.log("SRI Hash 지원 여부 : "+i),!document.getElementById("finCertSdkIframe")){var r=document.createElement("iframe");r.style.position="fixed",r.style.zIndex=200001,r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="transparent",r.style.display="none",r.frameBorder=0,r.setAttribute("id","finCertSdkIframe"),r.onload=function(){var e=r.contentWindow,t=e.document;e.addEventListener("message",function(e){"clientFrameJsLoadingFinished"===e.data&&(console.log("clientFrame.js 로딩 완료"),s=!0,c&&document.getElementById("finCertSdkIframe").contentWindow.FinCert.Interface.setClientFrameJsLoadingFinished())});var n=t.createElement("iframe");n.src="https://4user.yeskey.or.kr/fincert/web/v1/iframe.htm?2021-06-15T01_39_56.882Z&sriHash="+i,n.style.top="0px",n.style.left="-1px",n.style.width="1px",n.style.height="1px",n.tabIndex=-1,n.frameBorder=0,n.setAttribute("id","finCertSdkIframeTag"),t&&t.body&&t.body.appendChild(n),i?o.getValidJSForWebStandardComplianceBroswer("finCertUIScriptTag",a,"fincert-ui.js",t):o.getValidJSForNonWebStandardComplianceBroswer(a,"fincert-ui.js",t),i?o.getValidJSForWebStandardComplianceBroswer("finCertSdkScriptTag",d,"sdk.js",t):o.getValidJSForNonWebStandardComplianceBroswer(d,"sdk.js",t)},n.document&&n.document.body&&n.document.body.appendChild(r)}};!function e(){if(n.document&&"complete"!==n.document.readyState)setTimeout(e,50);else if(l){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href="https://4user.yeskey.or.kr/v1/must-integrity-fail.css",t.integrity="sha256-MUSTFAIL",t.crossOrigin="anonymous",t.onload=f.bind(this,!1),t.onerror=f.bind(this,!0),n.document.head.appendChild(t)}}()}(window,FinCert);